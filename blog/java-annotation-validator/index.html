<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="My Site Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="My Site Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="My Site" href="/opensearch.xml"><title data-react-helmet="true">Java æ³¨è§£æ£€éªŒå™¨ | My Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://zeffon.github.io/blog/java-annotation-validator"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Java æ³¨è§£æ£€éªŒå™¨ | My Site"><meta data-react-helmet="true" name="description" content="å¹³æ—¶åœ¨å†™å‚æ•°æ ¡éªŒå¯èƒ½å¤§å¤šä¼šåœ¨ service å±‚ä½¿ç”¨ if è¯­å¥çš„æ–¹å¼æ¥åˆ¤æ–­ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥å¾ˆä¼˜é›…çš„ä½¿ç”¨å‚æ•°æ ¡éªŒ--æ³¨è§£æ£€éªŒå™¨"><meta data-react-helmet="true" property="og:description" content="å¹³æ—¶åœ¨å†™å‚æ•°æ ¡éªŒå¯èƒ½å¤§å¤šä¼šåœ¨ service å±‚ä½¿ç”¨ if è¯­å¥çš„æ–¹å¼æ¥åˆ¤æ–­ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥å¾ˆä¼˜é›…çš„ä½¿ç”¨å‚æ•°æ ¡éªŒ--æ³¨è§£æ£€éªŒå™¨"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2020-04-06T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/zeffon"><meta data-react-helmet="true" property="article:tag" content="java"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://zeffon.github.io/blog/java-annotation-validator"><link data-react-helmet="true" rel="alternate" href="https://zeffon.github.io/blog/java-annotation-validator" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://zeffon.github.io/blog/java-annotation-validator" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://YOUR_APP_ID-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.d04f32aa.css">
<link rel="preload" href="/assets/js/runtime~main.65851471.js" as="script">
<link rel="preload" href="/assets/js/main.f1654f9f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">é¦–é¡µ</b></a><a class="navbar__item navbar__link" href="/docs/intro">æ–‡æ¡£</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">åšå®¢</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/zeffon" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_Bc3W"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_q+wC thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_9G5K margin-bottom--md">Recent posts</div><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/js-exception">JS å¼‚å¸¸é—®é¢˜</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/css3-animation">CSS3 åŠ¨ç”»</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/event-loop">JS çš„ä»»åŠ¡ç®¡ç†æœºåˆ¶</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/web-route">å‰ç«¯è·¯ç”± hash å’Œ history æ¨¡å¼</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/github-action">GitHub Actionsçš„åº”ç”¨</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">Java æ³¨è§£æ£€éªŒå™¨</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2020-04-06T00:00:00.000Z" itemprop="datePublished">April 6, 2020</time> Â· 6 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_8c0z"><div class="avatar margin-bottom--sm"><a href="https://github.com/zeffon" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_9q7L" src="https://github.com/zeffon.png" alt="Zeffon Wu"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/zeffon" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Zeffon Wu</span></a></div><small class="avatar__subtitle" itemprop="description">A web engineer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>å¹³æ—¶åœ¨å†™å‚æ•°æ ¡éªŒå¯èƒ½å¤§å¤šä¼šåœ¨ service å±‚ä½¿ç”¨ if è¯­å¥çš„æ–¹å¼æ¥åˆ¤æ–­ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥å¾ˆä¼˜é›…çš„ä½¿ç”¨å‚æ•°æ ¡éªŒ--æ³¨è§£æ£€éªŒå™¨</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="å‰è¨€"></a>å‰è¨€<a class="hash-link" href="#å‰è¨€" title="Direct link to heading">#</a></h2><p>å¹³æ—¶åœ¨å†™å‚æ•°æ ¡éªŒå¯èƒ½å¤§å¤šä¼šåœ¨ service å±‚ä½¿ç”¨ if è¯­å¥çš„æ–¹å¼æ¥åˆ¤æ–­ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥å¾ˆä¼˜é›…çš„ä½¿ç”¨å‚æ•°æ ¡éªŒ--æ³¨è§£æ£€éªŒå™¨ã€‚
æ³¨è§£éªŒè¯å™¨æ˜¯é€šè¿‡æ³¨è§£çš„æ–¹å¼ç»™ä¸€äº›å­—æ®µã€æ–¹æ³•ã€ç±»åŠ ä¸Šäº†æ³¨è§£ï¼Œä¸åŒçš„æ³¨è§£æœ‰ç€ä¸åŒçš„æ ¡éªŒï¼Œè¿™æ ·èƒ½å¸®åŠ©æˆ‘ä»¬æ›´ä¼˜é›…çš„å†™å‡ºä»£ç æ¥ï¼Œå¯è¯»æ€§ä¹Ÿæ˜¯ä¸é”™ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="æ­£æ–‡"></a>æ­£æ–‡<a class="hash-link" href="#æ­£æ–‡" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="jsr-303"></a>JSR-303<a class="hash-link" href="#jsr-303" title="Direct link to heading">#</a></h3><p>JSR-303 æä¾›ä¸€ä¸ªéªŒè¯æ ‡å‡† Validationï¼Œæˆ‘ä»¬ä¼šå¸¸å¸¸ä½¿ç”¨åˆ°çš„ï¼š</p><ol><li><code>@Min</code>å’Œ<code>@Max</code> æœ€å°å’Œæœ€å¤§æ•°é™åˆ¶</li><li><code>@Positive</code> æ•´æ•°æ ¡éªŒ</li><li><code>@NotBlank</code> æ ¡éªŒå­—ç¬¦ä¸²éç©ºï¼Œé•¿åº¦å¤§äº 0</li><li><code>@Email</code> é‚®ç®±æ ¡éªŒ</li><li><code>@Range</code> èŒƒå›´æ ¡éªŒ</li><li><code>@Lenght</code> é•¿åº¦æ ¡éªŒ</li><li><code>@NotNull</code> ä¸ä¸ºç©ºæ£€éªŒ</li><li><code>@Future</code> å¿…é¡»æ˜¯å°†æ¥æ—¥æœŸæ ¡éªŒ
... ...</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="ç®€å•å­—æ®µæ ¡éªŒ"></a>ç®€å•å­—æ®µæ ¡éªŒ<a class="hash-link" href="#ç®€å•å­—æ®µæ ¡éªŒ" title="Direct link to heading">#</a></h3><p><strong>JSR-303</strong>çš„æ³¨è§£ç”¨åœ¨ç®€å•å­—æ®µä¸Šï¼Œå¦‚è¦æ±‚ id ä¸ºæ•´æ•°ï¼Œæœ€å¤§ä¸å¯è¶…è¿‡ 10</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@RestController</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(&quot;/hello&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Hello() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(&quot;&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void hello(@Positive @Max(value=10, message=&quot;ä¸ç”¨è¶…è¿‡10å’¯&quot;) Integer id) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(id);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>ä½†æ˜¯è¿™æ ·æ˜¯ä¸èƒ½å¼€å¯éªŒè¯çš„ï¼Œæˆ‘ä»¬éœ€è¦çš„ç±»ä¸ŠåŠ ä¸Šæ³¨è§£</strong><code>**@Validated**</code><strong>æ‰èƒ½ä½¿æ³¨è§£éªŒè¯ç”Ÿæ•ˆã€‚</strong>ï¼ˆè¿˜å¯ä»¥è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯ï¼‰</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@RestController</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(&quot;/hello&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Validated // è¿™é‡ŒåŠ ä¸Š @Validated</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Hello() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(&quot;&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void hello(@Positive @Max(value=10, message=&quot;ä¸ç”¨è¶…è¿‡10å’¯&quot;) Integer id) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(id);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="body-æ ¡éªŒ"></a>Body æ ¡éªŒ<a class="hash-link" href="#body-æ ¡éªŒ" title="Direct link to heading">#</a></h3><p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æ ¡éªŒ body é‡Œé¢çš„å‚æ•°æ ¡éªŒ</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@RestController</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(&quot;/hello&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Validated</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Hello {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PostMapping(&quot;&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void say(@RequestBody Person person) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(person.age);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Setter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pubilc class Person {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Lenght(min=2, max=10, message=&quot;åˆ«è¶…å‡ºèŒƒå›´&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Integer age;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>è¿™æ—¶å€™è¿˜æ˜¯ä¸èƒ½æ ¡éªŒ body é‡Œé¢çš„å‚æ•°ï¼ŒåŸå› æ˜¯æ ¡éªŒæ²¡æœ‰ç”Ÿæ•ˆã€‚ç±»ä¸Šçš„<code>@Validated</code>æ˜¯ç»™è¯¥ç±»ä¸‹å­—æ®µå¼€å¯æ ¡éªŒçš„ï¼Œè€Œæˆ‘ä»¬è¦æ ¡éªŒçš„ age æ˜¯åœ¨ Person ç±»ä¸‹ï¼Œé‚£æˆ‘ä»¬éœ€è¦è·‘åˆ° Person ç±»æ‰“ä¸Šæ³¨è§£å—ï¼Ÿå¹¶ä¸éœ€è¦, åªéœ€è¦åœ¨å¯¹åº”ä¼ å…¥å‚æ•°æ‰“ä¸Šå°±è¡Œäº†</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@RestController</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(&quot;/hello&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Validated</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Hello {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PostMapping(&quot;&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void say(@RequestBody @Validated Person person) { // è¿™é‡ŒåŠ ä¸Š @Validated</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(person.age);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="çº§è”æ ¡éªŒ"></a>çº§è”æ ¡éªŒ<a class="hash-link" href="#çº§è”æ ¡éªŒ" title="Direct link to heading">#</a></h3><p>æœ‰æ—¶å€™ä¼ å…¥çš„ body å¯¹è±¡åˆåŒ…å«äº†å¯¹è±¡ï¼Œé‚£è¿™æ—¶å€™åˆå¦‚ä½•æ ¡éªŒå‘¢ï¼Ÿ</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@RestController</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(&quot;/hello&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Validated</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Hello {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PostMapping(&quot;&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void say(@RequestBody Person person) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(person.age);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Setter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pubilc class Person {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Lenght(min=2, max=10, message=&quot;åˆ«è¶…å‡ºèŒƒå›´&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Integer age;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Car car;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Setter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pubilc class Car {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Lenght(min=2, max=10, message=&quot;åˆ«è¶…å‡ºèŒƒå›´&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>é‚£æ˜¾ç„¶å¯¹ Car ç±»çš„ name æ ¡éªŒæ˜¯æ²¡æœ‰æˆåŠŸï¼Œå…¶æ²¡æœ‰ç”Ÿæ•ˆã€‚éœ€è¦åœ¨ Person ç±»ä¸‹ car å­—æ®µä¸Šæ‰“ä¸Š<code>@Valid</code> <strong>æ ‡å¿—çº§è”æ£€éªŒ</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Setter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pubilc class Person {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Lenght(min=2, max=10, message=&quot;åˆ«è¶…å‡ºèŒƒå›´&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Integer age;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Valid // è¿™é‡ŒåŠ ä¸Š @Valid</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Car car;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><blockquote><p><code>@Validated</code>å’Œ<code>@Valid</code>
è¿™ä¸¤ä¸ªéƒ½æ˜¯å¯ä»¥ç”¨æ¥æ ¡éªŒçš„ï¼Œä½¿ç”¨çš„åœºæ™¯å’ŒåŠŸèƒ½ä¸Šæœ‰ç‚¹åŒºåˆ«ï¼Œä½†æ˜¯æ€»ä½“ä¸Šæ˜¯å·®ä¸å¤šçš„ï¼Œä¸¤è€…éƒ½å¯ä»¥ç”¨æ¥å¼€å¯æ ¡éªŒã€‚<code>@Valid</code>æ˜¯ Java æä¾›çš„ä¸€ç§æ ‡å‡†ï¼Œè€Œ<code>@Validated</code>æ˜¯ Spring å¯¹<code>@Valid</code>çš„æ‰©å±•ï¼Œæ‰€ä»¥è¯´ä¸¤è€…æ˜¯å¾ˆç›¸ä¼¼çš„ã€‚ä¸€èˆ¬ä¼šä½¿ç”¨<code>@Validated</code>æ¥å¼€å¯éªŒè¯ï¼Œè€Œ<code>@Valid</code>åˆ™ç”¨åœ¨çº§è”æ£€éªŒä¸Š</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£"></a>è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£<a class="hash-link" href="#è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£" title="Direct link to heading">#</a></h3><ol><li>ç¼–å†™æ³¨è§£ç±»</li></ol><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@Documented // æ³¨è§£é‡Œçš„æ³¨é‡ŠåŠ å…¥æ–‡æ¡£</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Retention(RetentionPolicy.RUNTIME) // æ³¨è§£ä¿ç•™åˆ°è¿è¡Œé˜¶æ®µ</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Target({ElementType.TYPE, ElementType.FIELD}) // ç›®æ ‡ä½¿ç”¨ç±»ä¸Šå’Œæ–¹æ³•ä¸Š</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Constraint(validatedBy = PasswordValidator.class) // å…³è”é€»è¾‘ç±»ï¼Œç¼–å†™å…·ä½“é€»è¾‘åˆ¤æ–­ï¼ˆæ²¡æœ‰æŒ‡å®šçš„è¯ä¼šæŠ¥HV000030é”™ï¼‰</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public @interface PasswordEqual {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    int min() default 4;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    int max() default 6;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    String message() default &quot;password are not equal&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Class&lt;?&gt;[] groups() default {};</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Class&lt;? extends Payload&gt;[] payload() default {};</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="2"><li>å…³è”æ³¨è§£ç±»(å…·ä½“åˆ¤æ–­é€»è¾‘)</li></ol><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * éœ€è¦å®ç°ConstraintValidatorå¹¶éœ€è¦ä¸¤ä¸ªå‚æ•°</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æŒ‡å®šæ³¨è§£ç±» ç¬¬äºŒä¸ªå‚æ•°ï¼šè‡ªå®šä¹‰æ³¨è§£ä¿®é¥°çš„ç›®æ ‡çš„ç±»å‹</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * éœ€è¦è¦†ç›–ä¸¤ä¸ªæ–¹æ³•initialize()å’ŒisValid()</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PasswordValidator implements ConstraintValidator&lt;PasswordEqual, PersonDTO&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int min;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int max;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void initialize(PasswordEqual constrainAnnotation) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.min = constrainAnnotation.min();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.max = constrainAnnotation.max();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean isValid(PersonDTO personDTO, ConstraintValidatorContext constraintValidatorContext) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        String password1 = personDTO.getPassword1();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        String password2 = personDTO.getPassword2();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        boolean match = password1.equals(password2);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return match;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="3"><li>ä½¿ç”¨åœ¨éœ€è¦æ ¡éªŒçš„ç±»ä¸Š</li></ol><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@Builder</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@PasswordEqual(min=1) // è¿™é‡Œä½¿ç”¨</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PersonDTO {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String password1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String password2;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="ç›¸å…³å¼‚å¸¸"></a>ç›¸å…³å¼‚å¸¸<a class="hash-link" href="#ç›¸å…³å¼‚å¸¸" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_y2LR" id="hv000030"></a>HV000030<a class="hash-link" href="#hv000030" title="Direct link to heading">#</a></h4><p>HV000030: No validator could be found for type
åŸå› æ˜¯æ³¨è§£ç±» PasswordEqual æ²¡æœ‰ä¸å…³è”ç±» PasswordValidatorï¼Œ</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@Constraint(validatedBy = PasswordValidator.class)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_y2LR" id="hv000028"></a>HV000028<a class="hash-link" href="#hv000028" title="Direct link to heading">#</a></h4><p>HV000028: Unexpected exception during isValid call
åŸå› æ˜¯ PasswordValidator çš„æ–¹æ³• isValid å‡ºç°å¼‚å¸¸äº†ï¼Œå…·ä½“æŠ¥é”™éœ€è¦æ‰“æ–­ç‚¹åˆ†æå³å¯ã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean isValid(PersonDTO personDTO, ConstraintValidatorContext constraintValidatorContext) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        String password1 = personDTO.getPassword1();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        String password2 = personDTO.getPassword2();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        boolean match = password1.equals(password2);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return match;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_xD8n"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/blog/tags/java">java</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/zeffon/zeffon.github.io/blob/master/blog/2020/2020-04-06-java-annotation-validator.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/jpa-customize-entity"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« Jpaè¿”å›è‡ªå®šä¹‰å¯¹è±¡</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/java-jpa-jpql-and-native-sql"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Java JPA åŸç”ŸSQLå’ŒJPQL Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#å‰è¨€" class="table-of-contents__link">å‰è¨€</a></li><li><a href="#æ­£æ–‡" class="table-of-contents__link">æ­£æ–‡</a><ul><li><a href="#jsr-303" class="table-of-contents__link">JSR-303</a></li><li><a href="#ç®€å•å­—æ®µæ ¡éªŒ" class="table-of-contents__link">ç®€å•å­—æ®µæ ¡éªŒ</a></li><li><a href="#body-æ ¡éªŒ" class="table-of-contents__link">Body æ ¡éªŒ</a></li><li><a href="#çº§è”æ ¡éªŒ" class="table-of-contents__link">çº§è”æ ¡éªŒ</a></li><li><a href="#è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£" class="table-of-contents__link">è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£</a></li><li><a href="#ç›¸å…³å¼‚å¸¸" class="table-of-contents__link">ç›¸å…³å¼‚å¸¸</a></li></ul></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">æ–‡æ¡£</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">åšå®¢</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.65851471.js"></script>
<script src="/assets/js/main.f1654f9f.js"></script>
</body>
</html>